<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Adding new TLGs to the package â€¢ aNCA</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Adding new TLGs to the package">
<meta name="description" content="Learn how to add a new TLG to the package.
">
<meta property="og:description" content="Learn how to add a new TLG to the package.
">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">aNCA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9087</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/aNCA.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-contributing" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Contributing</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-contributing">
<li><a class="dropdown-item" href="../articles/contributing.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../articles/adding_tlg.html">Adding TLGs</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pharmaverse/aNCA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Adding new TLGs to the package</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/aNCA/blob/main/vignettes/adding_tlg.Rmd" class="external-link"><code>vignettes/adding_tlg.Rmd</code></a></small>
      <div class="d-none name"><code>adding_tlg.Rmd</code></div>
    </div>

    
    
<p>This is an in-depth guide on contributing to the package. In order to
get started with contributing, please read our <a href="https://pharmaverse.github.io/aNCA/CONTRIBUTING.html">contributing
guide</a></p>
<div class="section level2">
<h2 id="adding-new-tables-listing-and-graphs">Adding new Tables, Listing and Graphs<a class="anchor" aria-label="anchor" href="#adding-new-tables-listing-and-graphs"></a>
</h2>
<p>In order to add new TLGs, two things are needed: - a TLG definition
specified in the <a href="../../inst/shiny/tlg.yaml">tlg.yaml</a> file -
an implementation function that is responsible for generating an entry
(table, list, graph).</p>
<div class="section level3">
<h3 id="tlg-definition">TLG definition<a class="anchor" aria-label="anchor" href="#tlg-definition"></a>
</h3>
<p>Specified in <a href="../../inst/shiny/tlg.yaml">tlg.yaml</a> file.
Entry in that file is responsible for providing some metadata regarding
the TLG (like name, descriptions, links), a function reference for
creating the resulting TLG and options, taken as arguments by the
generating function, that allow for quick and easy definition of widgets
to be rendered in the application interface. This then allows the user
to customize plots in accordance to their needs.</p>
<div class="section level4">
<h4 id="general-format">General format<a class="anchor" aria-label="anchor" href="#general-format"></a>
</h4>
<p>The entry should have the following format. Identifying keys (wrapped
in <code>&lt;&gt;</code>) should be provided by the creator and be
unique within their scope (indentation level).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># unique identifier for given entry</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">&lt;entry id&gt;</span><span class="kw">:</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co">  # true / false whether TLG should be included as default</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="at">  </span><span class="fu">is_default</span><span class="kw">:</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co">  # type of the TLG, in this case must be Graph</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="co">  # name of the dataset</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="at">  </span><span class="fu">dataset</span><span class="kw">:</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="co">  # standarized id of the TLG, e.g. pkcg01     </span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="at">  </span><span class="fu">pkid</span><span class="kw">:</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="co">  # short label to be displayed as tab name</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="at">  </span><span class="fu">label</span><span class="kw">:</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="co">  # longer descriptions, to be displayed in the order table</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="at">  </span><span class="fu">description</span><span class="kw">:</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="co">  # link to the documentation of the TLG</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="at">  </span><span class="fu">link</span><span class="kw">:</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="co">  # name of the function exported by the package, responsible for generating TLG, must return a list of plots to be displayed</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="at">  </span><span class="fu">fun</span><span class="kw">:</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="co">  # options that can be passed as arguments to the function, will generate an editing widget on the TLG page</span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="at">  </span><span class="fu">options</span><span class="kw">:</span></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a><span class="co">    # see below mor more information on options</span></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a><span class="co">  # You can also specify template definitions. This is a character string with id of another TLG definition. All options will be copied over from template id. Any provided parameters will be a) overwritten if existing in the template or b) added as new.</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="options">Options<a class="anchor" aria-label="anchor" href="#options"></a>
</h4>
<p>Options should be passable as arguments into the implementation
function. Each provided option will generate a widget for the user to
provide customized values. This is the main interface to allow the users
to customize their reports. Options should be identified by a unique
<code>option_id</code>, that is the same as the named argument provided
to the implementation function. In example, if the implementation
function allows to specify <code>xaxis_label</code> as an argument, the
<code>option_id</code> should be the same.</p>
<p>There are several types of input widgets that you can specify.</p>
<div class="section level5">
<h5 id="text">text<a class="anchor" aria-label="anchor" href="#text"></a>
</h5>
<p>Standard shiny <code>textInput</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># option id, the same as the argument that is passed to the rendering function, must be unique in the scope of the TLG entry</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">&lt;option id&gt;</span><span class="kw">:</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co">  # type of the option/widget</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> text</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co">  # label to be displayed in the editing widget</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="at">  </span><span class="fu">label</span><span class="kw">:</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co">  # default value to be provided in the field;</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co">  # if provided, will overwrite function argument defaults;</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">  # if left empty, function defaults will be applied;</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="at">  </span><span class="fu">default</span><span class="kw">:</span><span class="at"> </span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="numeric">numeric<a class="anchor" aria-label="anchor" href="#numeric"></a>
</h5>
<p>Standard shiny <code>numericInput</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># option id, the same as the argument that is passed to the rendering function, must be unique in the scope of the TLG entry</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">&lt;option id&gt;</span><span class="kw">:</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co">  # type of the option/widget</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> numeric</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co">  # label to be displayed in the editing widget</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="at">  </span><span class="fu">label</span><span class="kw">:</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="co">  # default value to be provided in the field;</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="co">  # if provided, will overwrite function argument defaults;</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="co">  # if left empty, function defaults will be applied;</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="at">  </span><span class="fu">default</span><span class="kw">:</span><span class="at"> </span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="select">select<a class="anchor" aria-label="anchor" href="#select"></a>
</h5>
<p>Standard shiny <code>selectInput</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># option id, the same as the argument that is passed to the rendering function, must be unique in the scope of the TLG entry</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">&lt;option id&gt;</span><span class="kw">:</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="co">  # type of the option/widget</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> select</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">  # label to be displayed in the editing widget</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="at">  </span><span class="fu">label</span><span class="kw">:</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="co">  # choices to pick from the dropdown, either specified outright or using a special keyword:</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co">  # - '.colnames' keyword will pull the choices from the data column names</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co">  # - '$COLUMN_NAME' keyword will pull choices from values of a specific column</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="at">  </span><span class="fu">choices</span><span class="kw">:</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">  # whether to allow for multiple values to be selected  </span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="at">  </span><span class="fu">multiple</span><span class="kw">:</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co">  # default value to be provided in the field;</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="co">  # if provided, will overwrite function argument defaults;</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="co">  # if left empty, function defaults will be applied;</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="co">  # '.all' keyword can be applied to select all choices;</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="at">  </span><span class="fu">default</span><span class="kw">:</span><span class="at"> </span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="table">table<a class="anchor" aria-label="anchor" href="#table"></a>
</h5>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># option id, the same as the argument that is passed to the rendering function, must be unique in the scope of the TLG entry</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">&lt;option id&gt;</span><span class="kw">:</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="co">  # type of the option/widget</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> table</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="co">  # label to be displayed in the editing widget</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="at">  </span><span class="fu">label</span><span class="kw">:</span><span class="at"> </span><span class="st">"Variables formatting"</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="co">  # column definition for the input table, specifying each column type</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="at">  </span><span class="fu">cols</span><span class="kw">:</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="co">    # colum name, as accepted in the implementation function</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="at">    </span><span class="fu">&lt;column_name&gt;</span><span class="kw">:</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co">      # type of the input widget, either `text` or `select`</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="at">      </span><span class="fu">type</span><span class="kw">:</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">      # label for the column header</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="at">      </span><span class="fu">label</span><span class="kw">:</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="co">      # applicable to `select` type, choices to pick from the dropdown, either specified outright or using a special keyword:</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="co">      # - '.colnames' keyword will pull the choices from the data column names</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="co">      # - '$COLUMN_NAME' keyword will pull choices from values of a specific column</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="at">      </span><span class="fu">choices</span><span class="kw">:</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="co">  # default rows definition, should contain a list of rows that should be applied as defaults;</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="co">  # each row should be an array containing value for each defined column;</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a><span class="co">  # if row value for specific column should be empty, use special `$NA` keyword.</span></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a><span class="at">  </span><span class="fu">default_rows</span><span class="kw">:</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="group-label">group label<a class="anchor" aria-label="anchor" href="#group-label"></a>
</h5>
<p>In order to group options widgets visually, you can specify
<code>group_label</code>s in between the options definitions. Each group
label should be specified by a special keyword
<code>.group_label_N</code>, where <code>N</code> is an integer ID,
incremented for each label used within the particular TLG entry.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># will create a label to help visually group related widgets; should be a character string; N should be replaced with an integer to uniquely identify the keyword    </span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fu">.group_label_N</span><span class="kw">:</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h4>
<p>For examples of TLG definition implementations, please see <a href="inst/shiny/tlg.yaml">tlg.yaml</a> file in the repository.</p>
</div>
</div>
<div class="section level3">
<h3 id="implementation-function">Implementation function<a class="anchor" aria-label="anchor" href="#implementation-function"></a>
</h3>
<p>Function should be defined within <code>aNCA</code> package and meet
the following criteria:</p>
<ul>
<li>name should be prefaced with letter appropriate for tlg type:
<ul>
<li>
<code>t_*</code> for tables</li>
<li>
<code>l_*</code> for listings</li>
<li>
<code>g_*</code> for graphs</li>
</ul>
</li>
<li>should accept a <code>data</code> argument for providing results to
be rendered as a given TLG</li>
<li>should return a list of entries or a single entry.</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ercan Suekuer, Gerardo Jose Rodriguez, Pascal Baertschi, Jana Spinner, F. Hoffmann-La Roche AG.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
