% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/apply_mapping.R
\name{apply_mapping}
\alias{apply_mapping}
\title{Apply UI-Based Column Mapping to a Dataset}
\usage{
apply_mapping(
  dataset,
  mapping,
  manual_units,
  column_groups,
  desired_order,
  silent = FALSE
)
}
\arguments{
\item{dataset}{A data frame containing the raw data to be transformed.}

\item{mapping}{A named list of column mappings.}

\item{manual_units}{A named list containing valid unit options for different
variable types (e.g., \code{concentration}, \code{dose}, \code{time}).}

\item{column_groups}{A named list where names are group categories
(e.g., "Group Identifiers", "Sample Variables") and values are vectors
of column names belonging to each group.}

\item{desired_order}{A character vector specifying the desired column order
in the output dataset.}

\item{silent}{Boolean, whether to print message with applied mapping.
Defaults to \code{FALSE}.}
}
\value{
A transformed data frame with:
\itemize{
\item Renamed columns according to user mappings
\item Unit columns updated (if user-specified units are in \code{manual_units})
\item Concentration duplicates removed
\item Labels applied to columns (via \code{apply_labels()})
}
}
\description{
This function takes a dataset and applies user-specified column mappings
provided through a Shiny \code{input} object. It renames columns based
on the selected mappings, handles special cases such as \code{ADOSEDUR},
updates units for key variables, applies labels,
and removes detected duplicate concentration records.
}
\details{
\itemize{
\item Validates that all required columns are mapped and no duplicates exist.
\item If \code{ADOSEDUR} is not mapped, it is assigned a value of \code{0}.
\item Removes concentration data duplicates using all columns except \code{ARRLT}, \code{NRRLT},
and \code{NCA_PROFILE}.
\item Uses global objects like \code{MAPPING_COLUMN_GROUPS}, \code{MAPPING_DESIRED_ORDER}, and \code{LABELS}.
}
}
